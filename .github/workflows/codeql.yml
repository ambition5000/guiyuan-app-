#å¯¹äºå¤§å¤šæ•°é¡¹ç›®ï¼Œæ­¤å·¥ä½œæµæ–‡ä»¶ä¸éœ€è¦æ›´æ”¹ï¼›æ‚¨åªéœ€è¦
#ä»¥å°†å…¶æäº¤åˆ°å­˜å‚¨åº“ã€‚
#
#æ‚¨å¯èƒ½å¸Œæœ›æ›´æ”¹æ­¤æ–‡ä»¶ä»¥è¦†ç›–æ‰€åˆ†æçš„è¯­è¨€é›†ï¼Œ
#æˆ–æä¾›è‡ªå®šä¹‰æŸ¥è¯¢æˆ–ç”Ÿæˆé€»è¾‘ã€‚
#
#*******æ³¨********
#æˆ‘ä»¬å·²å°è¯•æ£€æµ‹æ‚¨å­˜å‚¨åº“ä¸­çš„è¯­è¨€ã€‚è¯·æ£€æŸ¥
#ä¸‹é¢å®šä¹‰çš„â€œè¯­è¨€â€çŸ©é˜µï¼Œä»¥ç¡®è®¤æ‚¨å…·æœ‰æ­£ç¡®çš„
#æ”¯æŒçš„CodeQLè¯­è¨€ã€‚
#
å§“å:"CodeQLé«˜çº§"

åœ¨â€¦â€¦ä¹‹ä¸Š:
æ¨:
åˆ†æ”¯æœºæ„:[ "ä¸»è¦" ]
pull_request:
åˆ†æ”¯æœºæ„:[ "ä¸»è¦" ]
è®¡åˆ’è¡¨:
-å…‹æœ—:'22 19 * * 1'22 19 * * 1'

å·¥ä½œ:
åˆ†æ:
å§“å:åˆ†æ(${{çŸ©é˜µ.è¯­è¨€}})
    #è¿è¡Œç¨‹åºå¤§å°å½±å“CodeQLåˆ†ææ—¶é—´ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ï¼š
    #-https://gh.io/recommended-hardware-resources-for-running-codeql
    #-https://gh.io/supported-runners-and-hardware-resources
    #-https://gh.io/using-larger-runners(ä»…é™GitHub.com)
    #è€ƒè™‘ä½¿ç”¨æ›´å¤§çš„è¿è¡Œå™¨æˆ–å…·æœ‰æ›´å¤šèµ„æºçš„æœºå™¨ï¼Œä»¥æé«˜åˆ†ææ—¶é—´ã€‚
run-on:${{(matrix.language=='swift'&&'macos-æœ€æ–°') ||'UBUNTU-æœ€æ–°' }}
æƒé™:
      #æ‰€æœ‰å·¥ä½œæµç¨‹éƒ½éœ€è¦
å®‰å…¨äº‹ä»¶:å†™

      è·å–å†…éƒ¨æˆ–ä¸“ç”¨CodeQLåŒ…æ‰€éœ€çš„#
åŒ…:è¯»

      #ä»…é€‚ç”¨äºä¸“ç”¨å­˜å‚¨åº“ä¸­çš„å·¥ä½œæµ
è¡ŒåŠ¨:è¯»
å†…å®¹:è¯»

ç­–ç•¥:
å¿«é€Ÿå¤±æ•ˆ:å‡çš„
çŸ©é˜µ:
åŒ…æ‹¬include:
        #CodeQLæ”¯æŒâ€œlanguageâ€çš„ä»¥ä¸‹å€¼å…³é”®å­—ï¼šâ€œC-CPPâ€ã€â€œcsharpâ€ã€â€œgoâ€ã€â€œjava-kotlinâ€ã€â€œjavascript-typescriptâ€ã€â€œpythonâ€ã€â€œrubyâ€ã€â€œswiftâ€
        #ä½¿ç”¨'C-CPP'åˆ†æç”¨Cã€C++æˆ–ä¸¤è€…ç¼–å†™çš„ä»£ç 
        #ä½¿ç”¨'java-kotlin'åˆ†æç”¨Javaã€Kotlinæˆ–ä¸¤è€…ç¼–å†™çš„ä»£ç 
        #ä½¿ç”¨'javascript-typescript'åˆ†æä»¥JavaScriptã€TypeScriptæˆ–ä¸¤è€…ç¼–å†™çš„ç¨‹å¼ç 
        #è‹¥è¦äº†è§£æœ‰å…³æ›´æ”¹åˆ†æè¯­è¨€æˆ–è‡ªå®šä¹‰æ„å»ºæ¨¡å¼ä»¥è¿›è¡Œåˆ†æçš„æ›´å¤šä¿¡æ¯ï¼Œ
        #see https://docs.github.com/en/code-security/code-scanning/creating-an-advanced-setup-for-code-scanning/customizing-your-advanced-setup-for-code-scanning.
        #å¦‚æœæ‚¨æ­£åœ¨åˆ†æå·²ç¼–è¯‘çš„è¯­è¨€ï¼Œåˆ™å¯ä»¥ä¿®æ”¹è¯¥è¯­è¨€çš„â€œæ„å»ºæ¨¡å¼â€ï¼Œä»¥è‡ªå®šä¹‰å¦‚ä½•
        #å·²åˆ†ææ‚¨çš„ä»£ç åº“ï¼Œè¯·å‚é˜…https://docs.github.com/en/code-security/code-scanning/creating-an-advanced-setup-for-code-scanning/codeql-code-scanning-for-compiled-languages
æ­¥éª¤:
-å§“å:ç­¾å‡ºå­˜å‚¨åº“
uses:æ“ä½œ/ç»“å¸@v4

    #åˆå§‹åŒ–CodeQLå·¥å…·è¿›è¡Œæ‰«æã€‚
-å§“å:åˆå§‹åŒ–CodeQL
uses:GitHub/codeql-action/init@v3
å’Œâ€¦â€¦ä¸€èµ·:
è¯­è¨€:${{çŸ©é˜µ.è¯­è¨€}}
æ„å»ºæ¨¡å¼:${{matrix.build-mode}}
        #å¦‚æœæ‚¨å¸Œæœ›æŒ‡å®šè‡ªå®šä¹‰æŸ¥è¯¢ï¼Œå¯ä»¥åœ¨æ­¤å¤„æˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰§è¡Œæ­¤æ“ä½œã€‚
        # By default, queries listed here will override any specified in a config file.
        # Prefix the list here with "+" to use these queries and those in the config file.

        # For more details on CodeQL's query packs, refer to: https://docs.github.com/en/code-security/code-scanning/automatically-scanning-your-code-for-vulnerabilities-and-errors/configuring-code-scanning#using-queries-in-ql-packs
        # queries: security-extended,security-and-quality

    # If the analyze step fails for one of the languages you are analyzing with
    # "We were unable to automatically build your code", modify the matrix above
    # to set the build mode to "manual" for that language. Then modify this step
    # to build your code.
    # â„¹ï¸ Command-line programs to run using the OS shell.
    # ğŸ“š See https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepsrun
    - if: matrix.build-mode == 'manual'
      shell: bash
      run: |
        echo 'If you are using a "manual" build mode for one or more of the' \
          'languages you are analyzing, replace this with the commands to build' \
          'your code, for example:'
        echo '  make bootstrap'
        echo '  make release'
        exit 1

    - name: Perform CodeQL Analysis
      uses: github/codeql-action/analyze@v3
      with:
        category: "/language:${{matrix.language}}"
